import{z as c,u as S,K as k,j as h,k as w,r as d,o as v,c as p,a as n,i as u,C as y,t as x,e as b}from"./index-c17fb389.js";import{C as B}from"./stockCount-f050c418.js";import{S as I}from"./searchbar-90305c5c.js";import{T as L}from"./table-86f89b75.js";import{P as E}from"./pagination-c112e35c.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const T={components:{Count:B,SearchBar:I,Table:L,PaginateStockErp:E},setup(){const P=c(()=>[{id:"warehouse",title:"คลัง"},{id:"itemcode",title:"รหัสสินค้า"},{id:"itemsname",title:"ชื่อสินค้า"},{id:"location",title:"Location"},{id:"lot",title:"Lot"},{id:"balance",title:"Balance"},{id:"allocated",title:"Allocated"},{id:"available",title:"Available"}]),m=S();m.user||m.logout();const g=k(),e=c(()=>g.erpItem),r=h(""),i=c(()=>{if(!r.value)return e.value;const t=r.value.toLowerCase();return e.value.filter(s=>s.itemcode.toLowerCase().includes(t)||s.lot.toLowerCase().includes(t)||s.warehouse.toLowerCase().includes(t)||s.itemsname.toLowerCase().includes(t))}),_=t=>{r.value=t};let l=h(1);const f=t=>{l.value=t};let a=h(300);const o=c(()=>Math.ceil(i.value.length/a.value)),C=c(()=>{const t=(l.value-1)*a.value,s=t+a.value;return i.value.slice(t,s)});return w(()=>{g.getProductERP()}),{items:e,textInput:r,filteredItems:i,handleSearch:_,tableColumns:P,currentPage:l,itemsPerPage:a,totalPages:o,paginatedData:C,onPageChange:f}}},A={class:"p-4 sm:ml-64"},D={class:"p-4 mt-14"},N={class:"flex flex-col-reverse sm:flex-row justify-end items-center mb-4"},V={class:"flex items-center sm:order-2 mb-4 sm:mb-0"},M={class:"flex items-center sm:order-1 w-full sm:w-auto sm:justify-start justify-center mr-auto"},R={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},z={class:"flex items-center justify-center"},K={key:0,class:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},q={key:1,class:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-blue-300"};function F(P,m,g,e,r,i){const _=d("SearchBar"),l=d("Count"),f=d("Table"),a=d("PaginateStockErp");return v(),p("div",A,[n("div",D,[n("div",N,[n("div",V,[u(_,{searchBar:e.textInput,onSearch:e.handleSearch},null,8,["searchBar","onSearch"])]),n("div",M,[u(l,{data:e.filteredItems},null,8,["data"])])]),n("div",R,[u(f,{columns:e.tableColumns,data:e.paginatedData},{available:y(({row:o})=>[n("div",z,[o.available>0?(v(),p("span",K,x(o.available),1)):b("",!0),o.available<=0?(v(),p("span",q,x(o.available),1)):b("",!0)])]),_:1},8,["columns","data"])])]),u(a,{currentPage:e.currentPage,totalPages:e.totalPages,itemsPerPage:e.itemsPerPage,onPageChanged:e.onPageChange},null,8,["currentPage","totalPages","itemsPerPage","onPageChanged"])])}const W=j(T,[["render",F]]);export{W as default};
