import{z as y,j as m,B as D,y as M,k as N,r as S,o as r,c as o,a as e,i as I,n as w,f as k,e as n,t as i,x as P,C as B,g as V,p as H,h as Z}from"./index-c17fb389.js";import{S as f}from"./sweetalert2.all-9555961e.js";import{S as q}from"./searchbar-90305c5c.js";import{T as R}from"./table-86f89b75.js";import{C as F}from"./orderCount-78c55eff.js";import{_ as U,b as W,a as G}from"./makro-7e250706.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import"./amaze-72ddaead.js";const K={components:{SearchBar:q,Table:R,CountOrderErp:F},setup(){const u=y(()=>[{id:"createdatetime",title:"วันที่"},{id:"cono",title:"CO"},{id:"invno",title:"INV"},{id:"number",title:"รายการ"},{id:"customer",title:"ลูกค้า"},{id:"amount",title:"มูลค่า"},{id:"status",title:"สถานะ"},{id:"saleschannel",title:"ช่องทาง"}]),d=m(!0),b=D(),s=y(()=>b.zortOrder),g=M(),E=y(()=>g.zortDashboard),C=async()=>{if((await f.fire({title:"ยืนยันการนำเข้าระบบ",text:"คุณต้องการนำข้อมูลเข้าสู่ระบบ ERP หรือไม่?",icon:"question",showCancelButton:!0,confirmButtonColor:"#C81E1E",cancelButtonColor:"#6B7280",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",reverseButtons:!0})).isConfirmed)try{f.fire({icon:"info",title:"กำลังนำเข้าระบบ",text:"กรุณารอสักครู่...",showConfirmButton:!1,allowOutsideClick:!1}),await b.addOrderErp(),f.fire({icon:"success",title:"สำเร็จ!",text:"นำเข้าระบบสำเร็จ"}),await L()}catch(l){console.log(l),f.hideLoading(),f.fire({icon:"error",title:"เกิดข้อผิดพลาด!",text:"ไม่สามารถนำเข้าระบบได้"})}},h=m([]),x=m(!1),t=a=>{h.value=a,x.value=h.value.length>0},j=()=>{document.querySelector('[class*="w-18"]')?d.value=!0:d.value=!1},p=m("wait-tab"),c=m(!1),A=async a=>{try{c.value=!0,p.value=a,console.log("tabs value after click:",p.value),await b.setTab(p.value)}catch(l){console.error("Error loading tab data:",l)}finally{c.value=!1}},L=async()=>{await A("success-tab")},_=m(""),O=y(()=>{if(!_.value)return s.value;const a=_.value.toLowerCase();return s.value.filter(l=>l.number.toLowerCase().includes(a)||l.customer.toLowerCase().includes(a)||l.orderdateString.toLowerCase().includes(a)||l.saleschannel.toLowerCase().includes(a))}),z=a=>{_.value=a},T=async()=>{try{c.value=!0,await b.getOrderZort(),await g.getDashboard()}catch(a){console.error("Error refreshing data:",a)}finally{c.value=!1}};return N(async()=>{c.value=!0;try{await b.getOrderZort(),await g.getDashboard()}catch(l){console.error("Error loading initial data:",l)}finally{c.value=!1}j(),new MutationObserver(j).observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["class"]})}),{tableColumns:u,addOrder:C,orders:s,textInput:_,filteredItems:O,handleSearch:z,selected:h,isItemSelected:x,onSelectedUpdate:t,handleTabs:A,tabs:p,afterAdded:L,inv:E,isCollapsed:d,refreshData:T,isLoading:c}}},v=u=>(H("data-v-3b44b3c8"),u=u(),Z(),u),Q={class:"p-4"},X={class:"flex flex-col-reverse sm:flex-row justify-end items-center mb-2"},Y={class:"mr-auto"},$=v(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 16c.41 0 .81-.03 1.21-.06c.19-.76.51-1.48.95-2.11c-.69.11-1.42.17-2.16.17c-2.42 0-4.7-.6-6-1.55V9.64c1.47.83 3.61 1.36 6 1.36s4.53-.53 6-1.36v1.55c.5-.12 1-.19 1.55-.19c.15 0 .3 0 .45.03V7c0-2.21-3.58-4-8-4S4 4.79 4 7v10c0 2.21 3.59 4 8 4c.66 0 1.31-.04 1.92-.12c-.35-.59-.61-1.24-.76-1.94c-.37.06-.75.06-1.16.06c-3.87 0-6-1.5-6-2v-2.23c1.61.78 3.72 1.23 6 1.23m0-11c3.87 0 6 1.5 6 2s-2.13 2-6 2s-6-1.5-6-2s2.13-2 6-2m11 12.5c0 .82-.25 1.58-.67 2.21l-1.09-1.09c.17-.34.26-.72.26-1.12A2.5 2.5 0 0 0 19 15v1.5l-2.25-2.25L19 12v1.5c2.21 0 4 1.79 4 4m-4 1l2.25 2.25L19 23v-1.5c-2.21 0-4-1.79-4-4c0-.82.25-1.58.67-2.21l1.09 1.09c-.17.34-.26.72-.26 1.12A2.5 2.5 0 0 0 19 20z"})],-1)),ee={class:"flex items-center sm:order-2 mb-4 sm:mb-0 ml-4"},te={class:"text-sm flex items-center justify-between font-medium text-center mb-1 text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700 bg-white rounded-lg"},se={class:"flex w-1/3 flex-wrap -mb-px"},ae={class:"mr-2"},re=v(()=>e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),oe={class:"mr-2"},de=v(()=>e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),ne={class:"flex items-center w-2/3 justify-end"},le={class:"flex items-center bg-gradient-to-r from-red-100 to-red-200 text-red-800 rounded-md px-4 mr-2 shadow-md font-medium"},ie=v(()=>e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),ce=v(()=>e("span",{class:"text-sm"},"Inv ล่าสุด:",-1)),ue={class:"text-lg font-bold ml-1"},be={class:"relative overflow-x-auto shadow-md sm:rounded-lg",style:{height:"calc(100vh - 165px)"}},me={key:0,class:"absolute inset-0 bg-white flex items-center justify-center z-50"},ve=V('<div class="flex flex-col items-center space-y-6" data-v-3b44b3c8><div class="relative w-64 h-16 overflow-hidden" data-v-3b44b3c8><div class="absolute bottom-0 w-full h-2 bg-gray-400 rounded-full" data-v-3b44b3c8></div><div class="absolute bottom-2 animate-car" data-v-3b44b3c8><div class="relative" data-v-3b44b3c8><div class="w-16 h-8 bg-[#0369A1] rounded-lg relative" data-v-3b44b3c8><div class="absolute top-1 left-2 w-3 h-2 bg-blue-200 rounded-sm" data-v-3b44b3c8></div><div class="absolute top-1 right-2 w-3 h-2 bg-blue-200 rounded-sm" data-v-3b44b3c8></div><div class="absolute top-1 left-1 w-1 h-1 bg-yellow-300 rounded-full" data-v-3b44b3c8></div><div class="absolute top-1 right-1 w-1 h-1 bg-yellow-300 rounded-full" data-v-3b44b3c8></div></div><div class="absolute -bottom-1 left-1 w-3 h-3 bg-gray-800 rounded-full border-2 border-gray-600" data-v-3b44b3c8></div><div class="absolute -bottom-1 right-1 w-3 h-3 bg-gray-800 rounded-full border-2 border-gray-600" data-v-3b44b3c8></div><div class="absolute -bottom-1 left-1 w-3 h-3 flex items-center justify-center" data-v-3b44b3c8><div class="w-1 h-1 bg-gray-400 rounded-full" data-v-3b44b3c8></div></div><div class="absolute -bottom-1 right-1 w-3 h-3 flex items-center justify-center" data-v-3b44b3c8><div class="w-1 h-1 bg-gray-400 rounded-full" data-v-3b44b3c8></div></div></div></div><div class="absolute bottom-1 left-0 w-full h-1" data-v-3b44b3c8><div class="animate-dust" data-v-3b44b3c8><div class="w-2 h-2 bg-gray-300 rounded-full opacity-60" data-v-3b44b3c8></div></div></div></div><div class="flex space-x-1" data-v-3b44b3c8><div class="w-2 h-2 bg-[#0369A1] rounded-full animate-pulse" data-v-3b44b3c8></div><div class="w-2 h-2 bg-[#0369A1] rounded-full animate-pulse" style="animation-delay:0.2s;" data-v-3b44b3c8></div><div class="w-2 h-2 bg-[#0369A1] rounded-full animate-pulse" style="animation-delay:0.4s;" data-v-3b44b3c8></div></div></div>',1),he=[ve],fe={class:"flex items-center justify-center"},ge={key:0,class:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},xe={key:1,class:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-blue-900 dark:text-blue-300"},pe={key:2,class:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-red-300"},_e={key:3,class:"bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300"},ye={class:"flex items-center justify-center"},we={key:0,class:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},ke={key:1,class:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-blue-900 dark:text-blue-300"},Ce={key:2,class:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-red-300"},Se={class:"flex items-center justify-center"},Be={key:0,src:U,width:"25",class:"mr-1"},Ee={key:1,src:W,width:"25",class:"mr-1"},je={key:2,src:G,width:"25",class:"mr-1"},Ae={key:2,class:"flex flex-col justify-center items-center h-full"},Le={class:"text-center"},Ie=V('<div class="mb-4" data-v-3b44b3c8><svg class="mx-auto h-16 w-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3b44b3c8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-3b44b3c8></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-3b44b3c8>ไม่มีข้อมูลรอนำเข้าระบบ</h3><p class="text-gray-500 text-sm mb-4" data-v-3b44b3c8>ยังไม่มีรายการที่รอการนำเข้าระบบ ERP</p>',3),Ve=v(()=>e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1));function Oe(u,d,b,s,g,E){const C=S("CountOrderErp"),h=S("SearchBar"),x=S("Table");return r(),o("div",{class:w(["p-4 transition-all duration-100 ease-in-out",s.isCollapsed?"ml-20":"ml-64"])},[e("div",Q,[e("div",X,[e("div",Y,[I(C,{data:s.filteredItems,isLoading:s.isLoading},null,8,["data","isLoading"])]),s.tabs==="wait-tab"?(r(),o("button",{key:0,class:w([{"opacity-50 cursor-not-allowed":s.isLoading},"bg-[#C81E1E] hover:bg-[#C81E1E]/80 text-white border border-[#C81E1E] shadow-md hover:border-[#C81E1E]/80 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2 text-center mb-2 sm:mb-0 dark:bg-green-600 dark:text-green-500 dark:hover:text-white dark:hover:bg-green-700 dark:focus:ring-green-800 sm:ml-4 inline-flex items-center gap-2"]),onClick:d[0]||(d[0]=t=>s.addOrder()),type:"button"},[$,k(" นำเข้าระบบ ")],2)):n("",!0),e("div",ee,[I(h,{searchBar:s.textInput,onSearch:s.handleSearch},null,8,["searchBar","onSearch"])])]),e("div",te,[e("ul",se,[e("li",ae,[e("a",{onClick:d[1]||(d[1]=t=>s.handleTabs("wait-tab")),class:w({"inline-flex items-center p-3 text-[#0369A1] border-b-2 border-[#0369A1] rounded-t-lg active dark:text-blue-500 dark:border-blue-500 cursor-pointer":s.tabs==="wait-tab","inline-flex items-center p-3 border-b-2 border-transparent rounded-t-lg hover:text-[#0369A1] hover:border-[#0369A1] dark:hover:text-gray-300 cursor-pointer":s.tabs!=="wait-tab"}),"aria-current":"page"},[re,k(" รอนำเข้าระบบ ")],2)]),e("li",oe,[e("a",{onClick:d[2]||(d[2]=t=>s.handleTabs("success-tab")),class:w({"inline-flex items-center p-3 text-[#0369A1] border-b-2 border-[#0369A1] rounded-t-lg  dark:text-blue-500 dark:border-blue-500 cursor-pointer":s.tabs==="success-tab","inline-flex items-center p-3 border-b-2 border-transparent rounded-t-lg hover:text-[#0369A1] hover:border-[#0369A1] dark:hover:text-gray-300 cursor-pointer":s.tabs!=="success-tab"})},[de,k(" นำเข้าระบบสำเร็จ ")],2)])]),e("div",ne,[e("div",le,[ie,ce,e("span",ue,i(s.inv.InvLastno),1)])])]),e("div",be,[s.isLoading?(r(),o("div",me,he)):n("",!0),s.filteredItems.length>0?(r(),P(x,{key:1,columns:s.tableColumns,data:s.filteredItems},{status:B(({row:t})=>[e("div",fe,[t.status==="Success"?(r(),o("span",ge,i(t.status),1)):n("",!0),t.status==="Pending"?(r(),o("span",xe,i(t.status),1)):n("",!0),t.status==="Voided"?(r(),o("span",pe,i(t.status),1)):n("",!0),t.status==="Waiting"?(r(),o("span",_e,i(t.status),1)):n("",!0)])]),paymentstatus:B(({row:t})=>[e("div",ye,[t.paymentstatus==="Paid"?(r(),o("span",we,i(t.paymentstatus),1)):n("",!0),t.paymentstatus==="Pending"?(r(),o("span",ke,i(t.paymentstatus),1)):n("",!0),t.paymentstatus==="Voided"?(r(),o("span",Ce,i(t.paymentstatus),1)):n("",!0)])]),saleschannel:B(({row:t})=>[e("div",Se,[t.saleschannel==="Shopee"?(r(),o("img",Be)):n("",!0),t.saleschannel==="Makro"?(r(),o("img",Ee)):t.saleschannel==="Lazada"?(r(),o("img",je)):n("",!0)])]),_:1},8,["columns","data"])):(r(),o("div",Ae,[e("div",Le,[Ie,e("button",{onClick:d[3]||(d[3]=(...t)=>s.refreshData&&s.refreshData(...t)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[Ve,k(" รีเฟรชข้อมูล ")])])]))])])],2)}const qe=J(K,[["render",Oe],["__scopeId","data-v-3b44b3c8"]]);export{qe as default};
