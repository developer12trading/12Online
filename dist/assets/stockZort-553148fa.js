import{z as c,K as y,j as x,k as B,r as m,o as h,c as k,a,i as f,C as P,t as p,e as S}from"./index-c17fb389.js";import{S as s}from"./sweetalert2.all-9555961e.js";import{C as Z}from"./stockCount-f050c418.js";import{S as I}from"./searchbar-90305c5c.js";import{T as E}from"./table-86f89b75.js";import{P as j}from"./pagination-c112e35c.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const N={components:{Count:Z,SearchBar:I,Table:E,Pagination:j},setup(){const v=c(()=>[{id:"name",title:"Name"},{id:"sku",title:"SKU"},{id:"sellprice",title:"Price"},{id:"stock",title:"Stock"},{id:"availablestock",title:"Available"}]),o=y(),d=c(()=>o.zortItem),e=async()=>{try{s.fire({icon:"info",title:"กำลังอัปเดตสต็อก",text:"กรุณารอสักครู่...",showConfirmButton:!1,allowOutsideClick:!1}),await o.updateErpStock(),s.fire({icon:"success",title:"สำเร็จ!",text:"อัปเดตสต็อกสินค้าสำเร็จ"}),await o.getProductZort()}catch{s.hideLoading(),s.fire({icon:"error",title:"เกิดข้อผิดพลาด!",text:"ไม่สามารถอัปเดตสต็อกสินค้าได้"})}},_=async()=>{try{s.fire({icon:"info",title:"กำลังอัปเดตสต็อก",text:"กรุณารอสักครู่...",showConfirmButton:!1,allowOutsideClick:!1}),await o.updateZortStock(),s.fire({icon:"success",title:"สำเร็จ!",text:"อัปเดตสต็อกสินค้าสำเร็จ"}),await o.getProductZort()}catch{s.hideLoading(),s.fire({icon:"error",title:"เกิดข้อผิดพลาด!",text:"ไม่สามารถอัปเดตสต็อกสินค้าได้"})}},n=x(""),i=c(()=>{if(!n.value)return d.value;const r=n.value.toLowerCase();return d.value.filter(u=>u.name.toLowerCase().includes(r)||u.sku.toLowerCase().includes(r))}),g=r=>{n.value=r};let l=x(1);const b=r=>{l.value=r};let t=x(10);const C=c(()=>Math.ceil(i.value.length/t.value)),w=c(()=>{const r=(l.value-1)*t.value,u=r+t.value;return i.value.slice(r,u)});return B(()=>{o.getProductZort()}),{items:d,textInput:n,filteredItems:i,handleSearch:g,tableColumns:v,tbHeader:[{title:"Name"},{title:"SKU"},{title:"Price"},{title:"Stock"},{title:"Available"}],currentPage:l,itemsPerPage:t,totalPages:C,paginatedData:w,onPageChange:b,updateStockErp:e,updateStockZort:_}}},T={class:"p-4 sm:ml-64"},D={class:"p-4 mt-14"},K={class:"flex flex-col-reverse sm:flex-row justify-end items-center mb-4"},V={class:"flex items-center mr-4 space-x-2 sm:order-2"},z={class:"flex items-center sm:order-3 mb-4 sm:mb-0"},A={class:"flex items-center sm:order-1 w-full sm:w-auto sm:justify-start justify-center mr-auto"},M={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},O={class:"flex items-center justify-start"},U={class:"flex items-center justify-center"},H={key:0,class:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300"},q={key:1,class:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-blue-300"};function F(v,o,d,e,_,n){const i=m("SearchBar"),g=m("Count"),l=m("Table"),b=m("Pagination");return h(),k("div",T,[a("div",D,[a("div",K,[a("div",V,[a("button",{onClick:o[0]||(o[0]=(...t)=>e.updateStockErp&&e.updateStockErp(...t)),type:"button",class:"bg-red-500 hover:bg-red-600 text-white border border-red-500 hover:border-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2 text-center mb-0 dark:bg-red-600 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-700 dark:focus:ring-red-800"}," นำเข้าจาก Erp "),a("button",{onClick:o[1]||(o[1]=(...t)=>e.updateStockZort&&e.updateStockZort(...t)),type:"button",class:"bg-blue-500 hover:bg-blue-600 text-white border border-blue-500 hover:border-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center mb-0 dark:bg-blue-600 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," นำเข้าจาก Zort ")]),a("div",z,[f(i,{searchBar:e.textInput,onSearch:e.handleSearch},null,8,["searchBar","onSearch"])]),a("div",A,[f(g,{data:e.filteredItems},null,8,["data"])])]),a("div",M,[f(l,{columns:e.tableColumns,data:e.paginatedData},{name:P(({row:t})=>[a("div",O,p(t.name),1)]),availablestock:P(({row:t})=>[a("div",U,[t.availablestock>0?(h(),k("span",H,p(t.availablestock),1)):S("",!0),t.availablestock<=0?(h(),k("span",q,p(t.availablestock),1)):S("",!0)])]),_:1},8,["columns","data"])])]),f(b,{currentPage:e.currentPage,totalPages:e.totalPages,itemsPerPage:e.itemsPerPage,onPageChanged:e.onPageChange},null,8,["currentPage","totalPages","itemsPerPage","onPageChanged"])])}const $=L(N,[["render",F]]);export{$ as default};
